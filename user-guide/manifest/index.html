
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Framework for writing and maintaining (postgres)SQL queries and (pgTAP) tests">
      
      
      
      
        <link rel="prev" href="../getting-started/">
      
      
        <link rel="next" href="../query-templates/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.23">
    
    
      
        <title>Manifest - tapestry</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6543a935.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#manifest" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="tapestry" class="md-header__button md-logo" aria-label="tapestry" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            tapestry
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Manifest
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/naiquevin/tapestry" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    naiquevin/tapestry
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  User Guide

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../rationale/" class="md-tabs__link">
        
  
    
  
  Rationale

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="tapestry" class="md-nav__button md-logo" aria-label="tapestry" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    tapestry
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/naiquevin/tapestry" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    naiquevin/tapestry
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    User Guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../install/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting started
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Manifest
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Manifest
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#placeholder" class="md-nav__link">
    <span class="md-ellipsis">
      placeholder
    </span>
  </a>
  
    <nav class="md-nav" aria-label="placeholder">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#posargs" class="md-nav__link">
    <span class="md-ellipsis">
      posargs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variables" class="md-nav__link">
    <span class="md-ellipsis">
      variables
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#query_templates_dir" class="md-nav__link">
    <span class="md-ellipsis">
      query_templates_dir
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test_templates_dir" class="md-nav__link">
    <span class="md-ellipsis">
      test_templates_dir
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queries_output_dir" class="md-nav__link">
    <span class="md-ellipsis">
      queries_output_dir
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tests_output_dir" class="md-nav__link">
    <span class="md-ellipsis">
      tests_output_dir
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#query_output_layout" class="md-nav__link">
    <span class="md-ellipsis">
      query_output_layout
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#query_output_file" class="md-nav__link">
    <span class="md-ellipsis">
      query_output_file
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#formatterpgformatter" class="md-nav__link">
    <span class="md-ellipsis">
      formatter.pgFormatter
    </span>
  </a>
  
    <nav class="md-nav" aria-label="formatter.pgFormatter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exec_path" class="md-nav__link">
    <span class="md-ellipsis">
      exec_path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conf_path" class="md-nav__link">
    <span class="md-ellipsis">
      conf_path
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#name_tagger" class="md-nav__link">
    <span class="md-ellipsis">
      name_tagger
    </span>
  </a>
  
    <nav class="md-nav" aria-label="name_tagger">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#style" class="md-nav__link">
    <span class="md-ellipsis">
      style
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#query_templates" class="md-nav__link">
    <span class="md-ellipsis">
      query_templates
    </span>
  </a>
  
    <nav class="md-nav" aria-label="query_templates">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#path" class="md-nav__link">
    <span class="md-ellipsis">
      path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#all_conds" class="md-nav__link">
    <span class="md-ellipsis">
      all_conds
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queries" class="md-nav__link">
    <span class="md-ellipsis">
      queries
    </span>
  </a>
  
    <nav class="md-nav" aria-label="queries">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#id" class="md-nav__link">
    <span class="md-ellipsis">
      id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#template" class="md-nav__link">
    <span class="md-ellipsis">
      template
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conds" class="md-nav__link">
    <span class="md-ellipsis">
      conds
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#output" class="md-nav__link">
    <span class="md-ellipsis">
      output
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#name_tag" class="md-nav__link">
    <span class="md-ellipsis">
      name_tag
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test_templates" class="md-nav__link">
    <span class="md-ellipsis">
      test_templates
    </span>
  </a>
  
    <nav class="md-nav" aria-label="test_templates">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#query" class="md-nav__link">
    <span class="md-ellipsis">
      query
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#path_1" class="md-nav__link">
    <span class="md-ellipsis">
      path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#output_1" class="md-nav__link">
    <span class="md-ellipsis">
      output
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../query-templates/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Query templates
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../test-templates/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Test templates
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../layouts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Layouts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../query-tags/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Query Tags
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../naming-conventions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Naming conventions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../commands/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Commands
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pg-format/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pg_format
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Docker
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../rationale/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Rationale
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#placeholder" class="md-nav__link">
    <span class="md-ellipsis">
      placeholder
    </span>
  </a>
  
    <nav class="md-nav" aria-label="placeholder">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#posargs" class="md-nav__link">
    <span class="md-ellipsis">
      posargs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#variables" class="md-nav__link">
    <span class="md-ellipsis">
      variables
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#query_templates_dir" class="md-nav__link">
    <span class="md-ellipsis">
      query_templates_dir
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test_templates_dir" class="md-nav__link">
    <span class="md-ellipsis">
      test_templates_dir
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queries_output_dir" class="md-nav__link">
    <span class="md-ellipsis">
      queries_output_dir
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tests_output_dir" class="md-nav__link">
    <span class="md-ellipsis">
      tests_output_dir
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#query_output_layout" class="md-nav__link">
    <span class="md-ellipsis">
      query_output_layout
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#query_output_file" class="md-nav__link">
    <span class="md-ellipsis">
      query_output_file
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#formatterpgformatter" class="md-nav__link">
    <span class="md-ellipsis">
      formatter.pgFormatter
    </span>
  </a>
  
    <nav class="md-nav" aria-label="formatter.pgFormatter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exec_path" class="md-nav__link">
    <span class="md-ellipsis">
      exec_path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conf_path" class="md-nav__link">
    <span class="md-ellipsis">
      conf_path
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#name_tagger" class="md-nav__link">
    <span class="md-ellipsis">
      name_tagger
    </span>
  </a>
  
    <nav class="md-nav" aria-label="name_tagger">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#style" class="md-nav__link">
    <span class="md-ellipsis">
      style
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#query_templates" class="md-nav__link">
    <span class="md-ellipsis">
      query_templates
    </span>
  </a>
  
    <nav class="md-nav" aria-label="query_templates">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#path" class="md-nav__link">
    <span class="md-ellipsis">
      path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#all_conds" class="md-nav__link">
    <span class="md-ellipsis">
      all_conds
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#queries" class="md-nav__link">
    <span class="md-ellipsis">
      queries
    </span>
  </a>
  
    <nav class="md-nav" aria-label="queries">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#id" class="md-nav__link">
    <span class="md-ellipsis">
      id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#template" class="md-nav__link">
    <span class="md-ellipsis">
      template
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conds" class="md-nav__link">
    <span class="md-ellipsis">
      conds
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#output" class="md-nav__link">
    <span class="md-ellipsis">
      output
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#name_tag" class="md-nav__link">
    <span class="md-ellipsis">
      name_tag
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test_templates" class="md-nav__link">
    <span class="md-ellipsis">
      test_templates
    </span>
  </a>
  
    <nav class="md-nav" aria-label="test_templates">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#query" class="md-nav__link">
    <span class="md-ellipsis">
      query
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#path_1" class="md-nav__link">
    <span class="md-ellipsis">
      path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#output_1" class="md-nav__link">
    <span class="md-ellipsis">
      output
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="manifest">Manifest</h1>
<p>Every <code>tapestry</code> "project" has a <code>tapestry.toml</code> file which is called
the <em>manifest</em>. It is in <a href="https://toml.io/en/">TOML</a> format and serves
the dual purpose of configuration as well as a registry of the
following entities:</p>
<ol>
<li><code>query_templates</code></li>
<li><code>queries</code></li>
<li><code>test_templates</code></li>
</ol>
<p>The various sections or top level <code>TOML</code> keys are described in detail
below. When going through this doc, you may find it helpful to refer
to the <a href="https://github.com/naiquevin/tapestry/tree/main/examples/chinook">chinook
example</a>
in the github repo. If you haven't checked the <a href="../getting-started/">Getting
started</a> section, it's recommended to read it
first.</p>
<h2 id="placeholder">placeholder</h2>
<p>The <code>placeholder</code> key is for configuring the style of the placeholder
syntax for parameters i.e. the values values that are substituted into
the statement when it is executed.</p>
<p>Two options are supported:</p>
<h3 id="posargs">posargs</h3>
<p><code>posargs</code> is short for positional arguments. The placeholders refer to
the parameters by positions e.g. <code>$1</code>, <code>$2</code> etc. This is the same
syntax that's used for defining prepared statements or SQL functions
in postgres.</p>
<p>This option is suitable when your db driver or SQL library accepts
queries in prepared statements
syntax. E.g. <a href="https://github.com/launchbadge/sqlx">sqlx</a> (Rust).</p>
<p>Default: The manifest file auto-generated upon running the <a href="../commands/#init"><code>tapestry
init</code></a> command will have,</p>
<div class="highlight"><pre><span></span><code><span class="n">placeholder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">posargs</span>
</code></pre></div>
<h3 id="variables">variables</h3>
<p>When <code>placeholder=variables</code> placeholders are added in the rendered
query using the <a href="https://www.postgresql.org/docs/current/app-psql.html#APP-PSQL-VARIABLES">variable substitution
syntax</a>
of postgres. The variable name in the query is preceded with colon
e.g. <code>:email</code>, <code>:department</code></p>
<p>This option is suitable when your db driver or SQL library accepts
queries with
variables. E.g. <a href="https://github.com/krisajenkins/yesql">yesql</a>,
<a href="https://github.com/layerware/hugsql">hugsql</a> (Clojure),
<a href="https://github.com/nackjicholson/aiosql">aiosql</a> (Python)</p>
<p>Examples</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:3"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Template</label><label for="__tabbed_1_2">placeholder = posargs</label><label for="__tabbed_1_3">placeholder = variables</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span>
<span class="w">    </span><span class="o">*</span>
<span class="k">FROM</span>
<span class="w">    </span><span class="n">employees</span>
<span class="k">WHERE</span>
<span class="w">    </span><span class="n">email</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">{{</span><span class="w"> </span><span class="n">placeholder</span><span class="p">(</span><span class="s1">&#39;email&#39;</span><span class="p">)</span><span class="w"> </span><span class="err">}}</span>
<span class="w">    </span><span class="k">AND</span><span class="w"> </span><span class="n">department</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">{{</span><span class="w"> </span><span class="n">placeholder</span><span class="p">(</span><span class="s1">&#39;department&#39;</span><span class="p">)</span><span class="w"> </span><span class="err">}}</span><span class="p">;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span>
<span class="w">    </span><span class="o">*</span>
<span class="k">FROM</span>
<span class="w">    </span><span class="n">employees</span>
<span class="k">WHERE</span>
<span class="w">    </span><span class="n">email</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">$</span><span class="mi">1</span>
<span class="w">    </span><span class="k">AND</span><span class="w"> </span><span class="n">department</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">$</span><span class="mi">2</span><span class="p">;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span>
<span class="w">    </span><span class="o">*</span>
<span class="k">FROM</span>
<span class="w">    </span><span class="n">employees</span>
<span class="k">WHERE</span>
<span class="w">    </span><span class="n">email</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">:</span><span class="n">email</span>
<span class="w">    </span><span class="k">AND</span><span class="w"> </span><span class="n">department</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">:</span><span class="n">department</span><span class="p">;</span>
</code></pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note that the <code>prepared_statement</code> Jinja variable available in
<a href="../test-templates/">test templates</a> will always have <code>posargs</code> based
placeholders even if the <code>placeholder</code> config in manifest file is set
to <code>variables</code>. That's the reason the Jinja var is named
<code>prepared_statement</code>.</p>
</div>
<h2 id="query_templates_dir">query_templates_dir</h2>
<p>Path where the query templates are located. The path is always
relative to the manifest file.</p>
<p>Default: The manifest file auto-generated upon running the <a href="../commands/#init"><code>tapestry
init</code></a> command will have,</p>
<div class="highlight"><pre><span></span><code><span class="n">query_templates_dir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;templates/queries&quot;</span>
</code></pre></div>
<h2 id="test_templates_dir">test_templates_dir</h2>
<p>Path where the query templates are located. The path is always
relative to the manifest file.</p>
<p>Default: The manifest file auto-generated upon running the <a href="../commands/#init"><code>tapestry
init</code></a> command will have,</p>
<div class="highlight"><pre><span></span><code><span class="n">test_templates_dir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;templates/tests&quot;</span>
</code></pre></div>
<h2 id="queries_output_dir">queries_output_dir</h2>
<p>Path to the output dir for the rendered queries. This path also needs
to be defined relative to the manifest file.</p>
<p>Default: The manifest file auto-generated upon running the <a href="../commands/#init"><code>tapestry
init</code></a> command will have,</p>
<div class="highlight"><pre><span></span><code><span class="n">queries_output_dir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;output/queries&quot;</span>
</code></pre></div>
<p>A common use case to modify this config would be to store SQL files in
a directory outside of the tapestry "project" dir, so that only the
SQL files in that directory can be packaged into the build
artifact. There's no need to include the query/test template and the
<code>pgTAP</code> test files in the build artifact. E.g.</p>
<div class="highlight"><pre><span></span><code><span class="n">queries_output_dir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;../sql_queries&quot;</span>
</code></pre></div>
<h2 id="tests_output_dir">tests_output_dir</h2>
<p>Path to the output dir for rendered <code>pgTAP</code> tests. The path is always
relative to the manifest file.</p>
<p>Default: The manifest file auto-generated upon running the <a href="../commands/#init"><code>tapestry
init</code></a> command will have,</p>
<div class="highlight"><pre><span></span><code><span class="n">tests_output_dir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;output/tests&quot;</span>
</code></pre></div>
<h2 id="query_output_layout">query_output_layout</h2>
<p><a href="../layouts/">Layout</a> to be used for the generated query files. The two
options are:</p>
<ol>
<li>
<p><code>one-file-one-query</code>: Each SQL query will be written to a separate file</p>
</li>
<li>
<p><code>one-file-all-queries</code>: All SQL queries will be written to a single file</p>
</li>
</ol>
<p>It's optional. The default value is <code>one-file-one-query</code>.</p>
<h2 id="query_output_file">query_output_file</h2>
<p><code>query_output_file</code> is optional but it's use is valid only when the
<a href="#query_output_layout">layout</a> is <code>one-file-all-queries</code>. It basically
saves the user from having to define the same <a href="#output"><code>output</code></a> for
all queries.</p>
<p>Refer to the <a href="../layouts/">Layouts</a> section of the user guide for more
info.</p>
<h2 id="formatterpgformatter">formatter.pgFormatter</h2>
<p>This section is for configuring the <code>pg_format</code> tool that <code>tapestry</code>
uses for formatting the rendered SQL files.</p>
<p>There two config params under this section:</p>
<h3 id="exec_path">exec_path</h3>
<p>Location of the <code>pg_format</code> executable.</p>
<h3 id="conf_path">conf_path</h3>
<p>Path to the <code>pg_format</code> config file. It can be used for configuring
the behavior of <code>pg_format</code> when it gets executed on rendered SQL. As
with all paths that we've seen so far, this one is also relative to
the manifest file.</p>
<p>Example</p>
<div class="highlight"><pre><span></span><code><span class="k">[formatter.pgFormatter]</span>
<span class="n">exec_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;pg_format&quot;</span>
<span class="n">conf_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;./.pg_format/config&quot;</span>
</code></pre></div>
<p>As mentioned in the installation guide, <code>pg_format</code> is not a mandatory
requirement but it's recommended.</p>
<p>Upon running the <a href="../commands/#init"><code>tapestry init</code></a> command, this
section will be included in the auto-generated manifest file only if
the executable <code>pg_format</code> is found on <code>PATH</code>. In that case, a default
<code>pg_format</code> config file will also be created.</p>
<p>To read more about configuring <code>pg_format</code> in the context of
<code>tapestry</code>, refer to the <a href="../pg-format/">pg_format</a> section of the
docs.</p>
<h2 id="name_tagger">name_tagger</h2>
<p><code>name_tagger</code> is a TOML table, which if present in the manifest will
cause the generated SQL queries to be <a href="../query-tags/#name-tagging-queries">name
tagged</a>.</p>
<h3 id="style">style</h3>
<p><code>name_tagger.style</code> can be used to control how name tags will be
derived from query id. The two options are:</p>
<ol>
<li><code>kebab-case</code></li>
<li><code>snake_case</code></li>
<li><code>exact</code></li>
</ol>
<p>Any special characters in the query <code>id</code> will be replaced with an
appropriate character based on the above option &mdash; hyphen in case
of <code>kebab-case</code> and underscore in case of <code>snake_case</code>. The third
option <code>exact</code> is different in the sense that the query <code>id</code> will be
used as it is as the name tag.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="k">[name_tagger]</span>
<span class="n">style</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;kebab-case&quot;</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note the autological naming of options <code>kebab-case</code> (with a hyphen)
v/s <code>snake_case</code> (with an underscore).</p>
</div>
<h2 id="query_templates">query_templates</h2>
<p><code>query_templates</code> is an <a href="https://toml.io/en/v1.0.0#array-of-tables">array of
tables</a> in <code>TOML</code>
parlance. So it needs to defined with double square brackets and can
be specified multiple times in the manifest file.</p>
<p>For every query template, there are two keys to be defined:</p>
<h3 id="path">path</h3>
<p>It's where the Jinja template file is located relative to the
<a href="#query_templates_dir"><code>query_templates_dir</code></a> defined earlier in the
manifest. <code>path</code> itself is considered as the unique identifier for the
query template.</p>
<p>Use <code>.j2</code> extension as the convention for the query template file.</p>
<h3 id="all_conds">all_conds</h3>
<p>It's a set of values that will be converted to <code>cond__</code> Jinja
variables that can be referenced inside the template. Note that they
are defined in the manifest without the <code>cond__</code> suffix.</p>
<p>This field is optional. If not specified, an empty set is considered
as the default.</p>
<p>For documentation on how to write a <code>query_template</code>, refer to
<a href="../query-templates/">Writing query templates</a></p>
<p>Example: </p>
<div class="highlight"><pre><span></span><code><span class="k">[[query_templates]]</span>
<span class="n">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;artists_long_songs.sql.j2&quot;</span>
<span class="n">all_conds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">&quot;genre&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;limit&quot;</span><span class="w"> </span><span class="p">]</span>

<span class="k">[[query_templates]]</span>
<span class="n">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;songs_formats.sql.j2&quot;</span>
<span class="n">all_conds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">&quot;artist&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;file_format&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;album_name&quot;</span><span class="w"> </span><span class="p">]</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When <code>all_conds</code> is not specified, it essentially means that the query
is a valid SQL statement and not a Jinja template. Then why define it
as a template? The answer to that is &mdash; so that it can be
embedded in tests.</p>
</div>
<h2 id="queries">queries</h2>
<p><code>queries</code> is an <a href="https://toml.io/en/v1.0.0#array-of-tables">array of
tables</a> in <code>TOML</code>
parlance. So it needs to defined with double square brackets and can
be specified multiple times in the manifest file.</p>
<p>A query can be defined using the following keys,</p>
<h3 id="id">id</h3>
<p><code>id</code> is an identifier for the query.</p>
<h3 id="template">template</h3>
<p><code>template</code> is a reference to a <a href="#query_templates"><code>query_template</code></a>
defined previously in the manifest.</p>
<h3 id="conds">conds</h3>
<p><code>conds</code> is a subset of the <code>all_conds</code> key that's defined for the
linked query template. It's an optional and if not specified, an empty
set will be considered by default.</p>
<h3 id="output">output</h3>
<p><code>output</code> is the path to the output file where the SQL query will be
rendered. It must be relative to the <code>queries_output_dir</code> config.</p>
<p>It's optional to specify the <code>output</code>. If not specified, the filename
of the output file will be derived by <em>slugifying</em> the <code>id</code>. This
property allows us to use certain <a href="../naming-conventions/">Naming
conventions</a> for giving suitable and consistent
names to the queries.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="k">[[queries]]</span>
<span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;artists_long_songs@genre*limit&quot;</span>
<span class="n">template</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;artists_long_songs.sql.j2&quot;</span>
<span class="n">conds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">&quot;genre&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;limit&quot;</span><span class="w"> </span><span class="p">]</span>
</code></pre></div>
<p>The derived value of <code>output</code> for the above will be
<code>artists_long_songs-genre-limit.sql</code>.</p>
<h3 id="name_tag">name_tag</h3>
<p><code>name_tag</code> can be optionally set to specify a custom name tag for the
query. Name tags are prefixed to the SQL queries as comments and they
are used by SQL loading libraries such as yesql, aiosql etc. Read more
about in <a href="../query-tags/#name-tagging-queries">Name tagging queries</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A query will be tagged with the specified <code>name_tag</code> only if
<a href="#name_tagger"><code>name_tagger</code></a> is set.</p>
</div>
<h2 id="test_templates">test_templates</h2>
<p><code>test_templates</code> is an <a href="https://toml.io/en/v1.0.0#array-of-tables">array of
tables</a> in <code>TOML</code>
parlance. So it needs to defined with double square brackets and can
be specified multiple times in the manifest file.</p>
<p>A <code>test_template</code> can be defined using the following keys,</p>
<h3 id="query">query</h3>
<p><code>query</code> is a reference to <a href="#query"><code>query</code></a> defined in the manifest.</p>
<h3 id="path_1">path</h3>
<p><code>path</code> is the path to the jinja template for the <code>pgTAP</code> test. It must
be relative to the <code>test_templates_dir</code>.</p>
<p>Use <code>.j2</code> extension as the convention for the test template file.</p>
<h3 id="output_1">output</h3>
<p><code>output</code> is the path where the <code>pgTAP</code> test file will be rendered. It
must be relative to the <code>tests_output_dir</code>. </p>
<p>Specifying <code>output</code> for <code>test_templates</code> is optional. If not
specified, it will be derived from the file stem of <code>path</code> i.e. by
removing the <code>.j2</code> extension.</p>
<p>For detailed documentation on how to write a <code>test_template</code>, refer to
<a href="../test-templates/">Writing test templates</a></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 Vineet Naik
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.ebd0bdb7.min.js"></script>
      
    
  </body>
</html>